<div [ngStyle]="{'min-height': clientHeight + 'px', 'margin-bottom': '60px'}">

    <nz-page-header class="header-page">
        <nz-breadcrumb nz-page-header-breadcrumb>
            <div class="top-left">
                <div style="align-items: center;">
                    <button nz-tooltip nzTooltipTitle="Inicio" nzTooltipPlacement="bottom" (click)="goHome()" nz-button
                        nzType="text" style="background-color: transparent;">
                        <img class="icono-eljuri" src="assets/icons/corporacion-eljuri.png">
                    </button>
                </div>
            </div>
            <nz-card class="card-header">
                <div nz-row style="height: 35px; margin-top: -22px;">
                    <div nz-col nzSpan="12" *ngIf="login">
                        <button nz-button nz-dropdown [nzDropdownMenu]="menu"
                            style="border-color: transparent; background-color: transparent">
                            <i nz-icon nzType="menu" class="icono-log">
                            </i>
                        </button>
                        <nz-dropdown-menu #menu="nzDropdownMenu">
                            <ul nz-menu>
                                <li nz-menu-item (click)="viewProfile()">
                                    <nz-space>
                                        <span *nzSpaceItem nz-icon nzType="profile"></span>
                                        <span *nzSpaceItem>Mi perfil </span>
                                    </nz-space>
                                </li>
                                <li nz-submenu [nzTitle]="sendtempl">
                                    <ul>
                                        <ng-template #sendtempl>
                                            <nz-space>
                                                <span *nzSpaceItem nz-icon nzType="search"></span>
                                                <span *nzSpaceItem>Consultar información </span>
                                            </nz-space>
                                        </ng-template>
                                        <ng-container>
                                            <li nz-menu-item (click)="goInformationE()">
                                                <nz-space>
                                                    <span *nzSpaceItem nz-icon nzType="user"></span>
                                                    <span *nzSpaceItem>Colaboradores</span>
                                                </nz-space>
                                            </li>
                                        </ng-container>
                                        <ng-container>
                                            <li nz-menu-item (click)="goInformationP()">
                                                <nz-space>
                                                    <span *nzSpaceItem nz-icon nzType="alert"></span>
                                                    <span *nzSpaceItem>Policias</span>
                                                </nz-space>
                                            </li>
                                        </ng-container>
                                    </ul>
                                </li>
                                <li nz-submenu [nzTitle]="sendtempl2">
                                    <ul>
                                        <ng-template #sendtempl2>
                                            <nz-space>
                                                <span *nzSpaceItem nz-icon nzType="gift"></span>
                                                <span *nzSpaceItem>Ver beneficios</span>
                                            </nz-space>
                                        </ng-template>
                                        <ng-container>
                                            <li nz-menu-item (click)="promosE()">
                                                <nz-space>
                                                    <span *nzSpaceItem nz-icon nzType="user"></span>
                                                    <span *nzSpaceItem>Colaboradores</span>
                                                </nz-space>
                                            </li>
                                        </ng-container>
                                        <ng-container>
                                            <li nz-menu-item (click)="promosP()">
                                                <nz-space>
                                                    <span *nzSpaceItem nz-icon nzType="alert"></span>
                                                    <span *nzSpaceItem>Policias</span>
                                                </nz-space>
                                            </li>
                                        </ng-container>
                                    </ul>
                                </li>
                            </ul>
                        </nz-dropdown-menu>
                    </div>
                    <div nz-col nzSpan="12" *ngIf="login">
                        <button nzTooltipTitle="Cerrar sesión" nz-tooltip (click)="logout()" nz-button nzType="text">
                            <i nz-icon nzType="user" class="icono-log">
                            </i>
                        </button>
                    </div>
                    <div nz-col nzSpan="12" *ngIf="!login">
                        <button nzTooltipTitle="Iniciar sesión" nz-tooltip (click)="logIn()" nz-button nzType="text">
                            <i nz-icon nzType="user" class="icono-log">
                            </i>
                        </button>
                    </div>

                </div>
            </nz-card>
        </nz-breadcrumb>
    </nz-page-header>


    <div class="cont-card">
        <nz-content style="text-align: center;">
            <nz-card nzHoverable class="card-filtros">
                <div style="text-align: center;">
                    <div nz-row [nzGutter]="6" class="upText"
                        style="margin-left: auto; margin-right: auto; text-align: center;">
                        <div nz-col [nzSpan]="6" class="gutter-row"
                            style="white-space: nowrap;text-overflow: ellipsis;overflow: hidden;" class="filtros">
                            <div nz-col nzSpan="24" style="display: grid;">
                                <button nz-tooltip nzTooltipTitle="Filtrar por cluster" (click)="clusterG()" nz-button
                                    nzType="text"
                                    style="white-space: nowrap;text-overflow: ellipsis;overflow: hidden;"><b
                                        class="text-fil"
                                        style="white-space: nowrap;text-overflow: ellipsis;overflow: hidden;">
                                        {{textCluster}} </b></button>

                            </div>
                        </div>
                        <div nz-col [nzSpan]="6" class="gutter-row"
                            style="white-space: nowrap;text-overflow: ellipsis;overflow: hidden;" class="filtros">

                            <div nz-col nzSpan="24" style="display: grid;">
                                <button nz-tooltip nzTooltipTitle="Filtrar por empresa" (click)="companyG()" nz-button
                                    nzType="text"
                                    style="white-space: nowrap;text-overflow: ellipsis;overflow: hidden;"><b
                                        class="text-fil"
                                        style="white-space: nowrap;text-overflow: ellipsis;overflow: hidden;">
                                        {{textCompany}} </b></button>
                            </div>


                        </div>
                        <div nz-col [nzSpan]="6" class="gutter-row" class="filtros">
                            <div nz-col nzSpan="24" style="display: grid;">
                                <button nz-tooltip nzTooltipTitle="Filtrar por país" (click)="countryG()" nz-button
                                    nzType="text"><b class="text-fil"> {{textCountry}} </b></button>
                            </div>
                        </div>
                        <div nz-col [nzSpan]="6" class="gutter-row" class="filtros" style="display: flex;
                        align-items: center; padding-top: 2px;">
                            <div nz-col nzSpan="12">

                                <button nz-tooltip nzTooltipTitle="Filtrar beneficios" (click)="visibleDraw=true"
                                    nz-button nzType="primary" style="background-color: #0a1c47; border-color: #0a1c47;"
                                    nzShape="circle"><span nz-icon style="color: white;"
                                        nzType="search"></span></button>

                            </div>
                            <div nz-col nzSpan="12">
                                <button nz-tooltip nzTooltipTitle="Limpiar todos los filtros" (click)="clearFilter()"
                                    nz-button nzType="primary" style="background-color: #0a1c47; border-color: #0a1c47;"
                                    nzShape="circle"><span nz-icon style="color: white;" nzType="clear"></span></button>

                            </div>



                            <!--
                            <div nz-row>
                                <div nz-col [nzSpan]="12">
                                    <button nz-tooltip nzTooltipTitle="Filtrar beneficios" (click)="visibleDraw=true"
                                        nz-button nzType="primary"
                                        style="background-color: #0a1c47; border-color: #0a1c47;" nzShape="circle"><span
                                            nz-icon style="color: white;" nzType="search"></span></button>

                                </div>
                                <div nz-col [nzSpan]="12">
                                    <button nz-tooltip nzTooltipTitle="Limpiar todos los filtros"
                                        (click)="clearFilter()" nz-button nzType="primary"
                                        style="background-color: #0a1c47; border-color: #0a1c47;" nzShape="circle"><span
                                            nz-icon style="color: white;" nzType="clear"></span></button>
                                </div>
                            </div>

                            -->
                        </div>
                    </div>
                </div>
            </nz-card>
        </nz-content>
    </div>
    <nz-divider class="down2"></nz-divider>
    <nz-spin [nzSpinning]="loadingSkelet">
        <nz-tabset nzCentered [nzLinkRouter] [(nzSelectedIndex)]="opSelected">
            <nz-tab (nzClick)="goCluster(item)" *ngFor="let item of dataSegmentos" [nzTitle]="titleTemplate">
                <ng-template #titleTemplate [nzLinkExact]>

                    <div class="container-clusters">
                        <div style="text-align: center;">
                            <span>
                                <img class="logo-cluster" src="assets/segmentos/{{item.icono}}" alt="ejemplo.jpg">
                            </span>
                        </div>
                        <div style="text-align: center; font-size: 12px;">{{ item.nombre }}</div>
                    </div>
                </ng-template>
            </nz-tab>
        </nz-tabset>
    </nz-spin>
    <router-outlet></router-outlet>
</div>
<app-footer></app-footer>
<nz-modal [(nzVisible)]="isVisibleLogin" [nzClosable]="" [nzContent]="modalContentForm" nzTitle="Iniciar Sesión"
    [nzFooter]="null" nzWidth="400px" nzHeight="300px" (nzOnCancel)="isVisibleLogin = false">
    <ng-template #modalContentForm>
        <nz-card>
            <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" style="width: 100%;"
                [nzLayout]="'vertical'">
                <div class="logo-item">
                    <img src="assets/icons/corporacion-eljuri.png" style="width: 100%; align-items: center;"
                        alt="exampl.jpg">
                </div>
                <nz-form-item style="padding-top: 10px;">
                    <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="email">Nombre de usuario</nz-form-label>
                    <nz-form-control nzErrorTip="Por favor ingrese su nombre de usuario!">
                        <nz-input-group nzPrefixIcon="user" nzSize="large">
                            <input type="text" nz-input formControlName="userName" placeholder="Username" />
                        </nz-input-group>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="email">Contraseña</nz-form-label>
                    <nz-form-control nzErrorTip="Por favor ingrese su contraseña!">
                        <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate" nzSize="large">
                            <input type="password" nz-input formControlName="password" placeholder="Password"
                                [type]="passwordVisible ? 'text' : 'password'" />
                        </nz-input-group>
                        <ng-template #suffixTemplate>
                            <i nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                                (click)="passwordVisible = !passwordVisible"></i>
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>
                <div style="text-align: center;">
                    <button [nzLoading]="isLoadingOne" nz-button class="login-form-button login-form-margin"
                        [nzType]="'primary'">Iniciar Sesión</button><br>
                </div>
            </form>
        </nz-card>
    </ng-template>
</nz-modal>
<nz-modal [(nzVisible)]="profile" [nzClosable]="" [nzContent]="modalContentForm2" nzTitle="Información de usuario"
    [nzFooter]="null" (nzOnCancel)="profile=false">
    <ng-template #modalContentForm2>
        <nz-row style="text-align: center; margin-bottom: 20px;">
            <div class="logo-item">
                <img src="assets/icons/corporacion-eljuri.png" style="width: 100%; align-items: center;"
                    alt="exampl.jpg">
            </div>
        </nz-row>
        <nz-descriptions nzBordered nzLayout="vertical" nzSize="small"
            [nzColumn]="{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }">
            <nz-descriptions-item nzTitle="Nombre">{{user.nombre}}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="Apellido">{{user.apellido}}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="Email">{{user.mail}}</nz-descriptions-item>

        </nz-descriptions>
    </ng-template>
</nz-modal>
<nz-drawer nzHeight="150px" [nzClosable]="false" [nzVisible]="visibleDraw" nzPlacement="top" nzTitle="FILTROS:"
    (nzOnClose)="close()">
    <ng-container *nzDrawerContent style="justify-content: center; display: flex; flex-wrap: wrap;">
        <div>
            <div nz-row [nzGutter]="8" style="margin-left: auto; margin-right: auto; ">
                <div nz-col [nzSpan]="8" class="gutter-row">
                    <div>
                        <b>Cluster: </b>
                        <nz-select [nzOpen]="openCluster" class="filtro-cluster" [(ngModel)]="cluster" nzShowSearch
                            nzPlaceHolder="Seleccione cluster" (ngModelChange)="onChange()">
                            <nz-option *ngFor="let item of dataSegmentos" [nzLabel]="item.nombre"
                                [nzValue]="item.codigo"></nz-option>
                        </nz-select>
                    </div>
                </div>
                <div nz-col [nzSpan]="8" class="gutter-row">
                    <div>
                        <b>Empresa: </b>
                        <nz-select [nzOpen]="openCompany" class="filtro-empresa" [(ngModel)]="empresa" nzShowSearch
                            nzAllowClear nzPlaceHolder="Seleccione empresa" (ngModelChange)="onChange()">
                            <nz-option *ngFor="let item of dataEmpresas" [nzLabel]="item.razonSocial"
                                [nzValue]="item.codigo"></nz-option>
                        </nz-select>
                    </div>
                </div>
                <div nz-col [nzSpan]="8" class="gutter-row">
                    <div>
                        <b>País: </b>
                        <br>
                        <nz-select [nzOpen]="openCountry" class="filtro-pais" [(ngModel)]="pais" nzShowSearch
                            nzAllowClear nzPlaceHolder="Seleccione país" (ngModelChange)="onChange()">
                            <nz-option *ngFor="let item of dataLugares" [nzLabel]="item.descripcion"
                                [nzValue]="item.codigo"></nz-option>
                        </nz-select>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</nz-drawer>