<nz-page-header class="header-page">
    <nz-breadcrumb nz-page-header-breadcrumb>
        <div class="top-left">
            <div style="align-items: center;">
                <img class="icono-eljuri" src="assets/icons/corporacion-eljuri.png">
            </div>
        </div>
        <div class="top-center">
            <h1 class="text-title-header" style="color: #0a1c47"><b> CORPORACION EMPRESARIAL ELJURI</b></h1>
        </div>

        <div *ngIf="login==false" class="top-right">
            <div style="align-items: center;">
                <button nzTooltipTitle="Iniciar sesión" nz-tooltip (click)="logIn()" nz-button nzType="text">
                    <i nz-icon nzType="login" class="icono-log">
                    </i>
                </button>
            </div>
        </div>
        <div  *ngIf="login==true" class="top-right">
            <div style="align-items: center;">
                <button nzTooltipTitle="Cerrar sesión" nz-tooltip (click)="logout()" nz-button nzType="text">
                    <i nz-icon nzType="logout" class="icono-log">
                    </i>
                </button>
            </div>
        </div>

        <div  *ngIf="login==true" class="top-right2">
            <div style="align-items: center;">
                <button nzTooltipTitle="Consultar información" nz-tooltip (click)="goInformation()" nz-button nzType="text">
                    <i nz-icon nzType="user" class="icono-log">
                    </i>
                </button>
            </div>
        </div>
    </nz-breadcrumb>
</nz-page-header>

<div class="cont-card">
    <nz-content style="text-align: center;">
        <nz-card nzHoverable
           class="card-filtros">
            <div style="text-align: center;">
                <div nz-row [nzGutter]="8" style="margin-left: auto; margin-right: auto; text-align: center;">
                    <div nz-col [nzSpan]="8" class="filtros">
                        <div>
                            <b>Cluster: </b>
                            <nz-select  class="filtro-cluster" [(ngModel)]="cluster" nzShowSearch 
                                nzPlaceHolder="Seleccione cluster" (ngModelChange)="onChange()">
                                <nz-option *ngFor="let item of dataSegmentos" [nzLabel]="item.nombre"
                                    [nzValue]="item.codigo"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    <div nz-col [nzSpan]="8" class="filtros">
                        <div>
                            <b>Empresa: </b>
                            <nz-select class="filtro-empresa" [(ngModel)]="empresa" nzShowSearch nzAllowClear
                                nzPlaceHolder="Seleccione empresa" (ngModelChange)="onChange()">
                                <nz-option *ngFor="let item of dataEmpresas" [nzLabel]="item.razonSocial"
                                    [nzValue]="item.codigo"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                    <div nz-col [nzSpan]="8" class="filtros">
                        <div>
                            <b>País: </b>
                            <nz-select class="filtro-pais" [(ngModel)]="pais" nzShowSearch nzAllowClear
                                nzPlaceHolder="Seleccione país" (ngModelChange)="onChange()">
                                <nz-option *ngFor="let item of dataLugares" [nzLabel]="item.descripcion"
                                    [nzValue]="item.codigo"></nz-option>
                            </nz-select>
                        
                            <span  nz-icon style=" color: #0a1c47;
                            font: icon;
                            text-align: center;
                            border-radius: 50%;
                            font-size: 20px; margin-left: 10px; " nzType="search" nzTheme="outline"></span>
                            
                        </div>    
                    </div>
                   
                </div>
            </div>
        </nz-card>
    </nz-content>
</div>

<nz-tabset nzCentered [nzLinkRouter] style="margin-top: 10px;">
    <nz-tab (nzClick)="goCluster(item)" *ngFor="let item of dataSegmentos" [nzTitle]="titleTemplate"
        (ngModel)="opSelected">
        <ng-template #titleTemplate [nzLinkExact]>
            <div class="container-clusters">
                <div style="text-align: center;"><span><img class="logo-cluster" src="assets/segmentos/{{item.icono}}"
                            alt="ejemplo.jpg"></span></div>
                <div style="text-align: center; font-size: 12px;">{{ item.nombre }}</div>
            </div>
        </ng-template>
    </nz-tab>
</nz-tabset>
<router-outlet></router-outlet>

<nz-modal [(nzVisible)]="isVisibleLogin" [nzClosable]="" [nzContent]="modalContentForm" nzTitle="Iniciar Sesión"
    [nzFooter]="null" nzWidth="400px" nzHeight="300px" (nzOnCancel)="isVisibleLogin = false">
    <ng-template #modalContentForm>
        <nz-card>
            <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" style="width: 100%;"
                [nzLayout]="'vertical'">
                <div class="logo-item">
                    <img src="assets/icons/corporacion-eljuri.png" style="width: 100%; align-items: center;" alt="exampl.jpg">
                </div>
                <nz-form-item style="padding-top: 10px;">
                    <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="email">Nombre de usuario</nz-form-label>
                    <nz-form-control nzErrorTip="Por favor ingrese su nombre de usuario!">
                        <nz-input-group nzPrefixIcon="user" nzSize="large">
                            <input type="text" nz-input formControlName="userName" placeholder="Username" />
                        </nz-input-group>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="24" [nzXs]="24" nzRequired nzFor="email">Contraseña</nz-form-label>
                    <nz-form-control nzErrorTip="Por favor ingrese su contraseña!">
                        <nz-input-group nzPrefixIcon="lock" [nzSuffix]="suffixTemplate" nzSize="large">
                            <input type="password" nz-input formControlName="password" placeholder="Password"
                                [type]="passwordVisible ? 'text' : 'password'" />
                        </nz-input-group>
                        <ng-template #suffixTemplate>
                            <i nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                                (click)="passwordVisible = !passwordVisible"></i>
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>
                <div style="text-align: center;">
                    <button [nzLoading]="isLoadingOne" nz-button class="login-form-button login-form-margin"
                    [nzType]="'primary'">Iniciar Sesión</button><br>
                </div>
            </form>
        </nz-card>
    </ng-template>
</nz-modal>